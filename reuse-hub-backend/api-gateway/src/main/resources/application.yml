server:
  port: 8080

app:
  api-prefix: /api/v1

spring:
  application:
    name: api-gateway
  profiles:
    active: @spring.profiles.active@
  cloud:
    gateway:
      server:
        webflux:
          discovery:
            locator:
              enabled: true
          routes:
            - id: identity-service
              uri: lb://identity-service
              predicates:
                - Path=${app.api-prefix}/identity/**
              filters:
                - StripPrefix=3

            - id: profile-service
              uri: lb://profile-service
              predicates:
                - Path=${app.api-prefix}/profile/**
              filters:
                - StripPrefix=3

            - id: user-service
              uri: lb://user-service
              predicates:
                - Path=${app.api-prefix}/users/**
              filters:
                - StripPrefix=3

            - id: item-service
              uri: lb://item-service
              predicates:
                - Path=${app.api-prefix}/items/**
              filters:
                - StripPrefix=3

            - id: transaction-service
              uri: lb://transaction-service
              predicates:
                - Path=${app.api-prefix}/transactions/**
              filters:
                - StripPrefix=3

            - id: notification-service
              uri: lb://notification-service
              predicates:
                - Path=${app.api-prefix}/notifications/**
              filters:
                - StripPrefix=3

            - id: chat-service
              uri: lb://chat-service
              predicates:
                - Path=${app.api-prefix}/chats/**
              filters:
                - StripPrefix=3

            - id: admin-service
              uri: lb://admin-service
              predicates:
                - Path=${app.api-prefix}/admin/**
              filters:
                - StripPrefix=3

            - id: recommendation-service
              uri: lb://recommendation-service
              predicates:
                - Path=${app.api-prefix}/recommendations/**
              filters:
                - StripPrefix=3


eureka:
  instance:
    prefer-ip-address: true

  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: ${EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE:http://localhost:8761/eureka/}

